<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/yuru7/udev-gothic@main/udev-gothic.css">
    
    <title>IPアドレス確認くん Pro</title>
    <style>
        :root {
            --primary: #00f2fe;
            --secondary: #4facfe;
            --bg: #0f172a;
            --card: #1e293b;
            --text: #f8fafc;
            --success: #10b981;
            --error: #f43f5e;
            /* フォントスタックの設定 */
            --font-udev: "UDEV Gothic", "Cascadia Code", Consolas, monospace;
        }

        body {
            margin: 0; padding: 0;
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background: radial-gradient(circle at top right, #1e293b, #0f172a);
            color: var(--text);
            display: flex; flex-direction: column; 
            justify-content: center; align-items: center;
            min-height: 100vh; padding: 20px; box-sizing: border-box;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .container {
            background: var(--card);
            padding: 2.5rem;
            border-radius: 24px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.1);
            width: 100%; max-width: 450px;
            text-align: center;
            animation: fadeInUp 0.8s ease-out;
            position: relative;
        }

        h1 { font-size: 1.1rem; color: var(--primary); margin-bottom: 2rem; letter-spacing: 1px; }

        .ip-group { margin-bottom: 1.5rem; text-align: left; position: relative; }
        label { display: block; font-size: 0.85rem; color: #94a3b8; margin-bottom: 0.6rem; font-weight: bold; }

        /* ▼▼▼ IP表示部分に UDEV Gothic を適用 ▼▼▼ */
        .ip-address {
            font-family: var(--font-udev);
            font-size: 1.2rem; /* 少し大きくするとUDEVの美しさが際立ちます */
            background: rgba(0,0,0,0.3);
            padding: 1rem; border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            border-left: 4px solid var(--secondary);
            word-break: break-all; cursor: pointer;
            transition: all 0.2s ease;
            letter-spacing: 0.05em; /* 視認性アップ */
        }

        .ip-address:hover {
            background: rgba(255,255,255,0.05); border-color: var(--primary);
            transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 242, 254, 0.1);
        }

        .ip-address.error-text { border-left-color: var(--error); color: var(--error); }

        .copy-badge {
            position: absolute; right: 0; top: -28px;
            background: var(--success); color: white;
            font-size: 0.75rem; padding: 4px 10px;
            border-radius: 20px; opacity: 0;
            transition: all 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
            pointer-events: none;
            font-family: sans-serif; /* バッジは読みやすさ優先 */
        }
        .copy-badge.error-badge { background: var(--error); }
        .copy-badge.show { opacity: 1; transform: translateY(0); }

        .button-group {
            margin-top: 2.5rem;
            display: flex; flex-direction: column; gap: 12px;
        }

        .btn {
            border: 1px solid var(--primary);
            padding: 0.8rem; border-radius: 12px;
            font-size: 0.9rem; font-weight: bold;
            cursor: pointer; display: flex; align-items: center;
            justify-content: center; gap: 10px;
            transition: all 0.3s ease; outline: none;
            width: 100%;
            font-family: inherit;
        }

        .btn-bulk { background: var(--primary); color: var(--bg); }
        .btn-bulk:hover { box-shadow: 0 0 20px rgba(0, 242, 254, 0.6); transform: scale(1.02); }

        .btn-share { background: rgba(0, 242, 254, 0.1); color: var(--primary); }
        .btn-share:hover { background: rgba(0, 242, 254, 0.2); transform: translateY(-2px); }

        svg { fill: currentColor; width: 18px; height: 18px; }

        footer {
            margin-top: 2rem; font-size: 0.85rem; color: #64748b;
            letter-spacing: 1px; animation: fadeInUp 1s ease-out 0.5s both;
        }

        .creator-link {
            color: var(--secondary); font-weight: bold; text-decoration: none;
            position: relative; padding: 2px 4px; transition: all 0.3s ease;
        }
        .creator-link:hover { color: var(--primary); text-shadow: 0 0 8px rgba(0, 242, 254, 0.6); }
        .creator-link::after {
            content: ''; position: absolute; width: 0; height: 1px;
            bottom: 0; left: 0; background-color: var(--primary); transition: width 0.3s ease;
        }
        .creator-link:hover::after { width: 100%; }

        .loading { color: #64748b; font-style: italic; }
    </style>
</head>
<body>

    <div class="container">
        <div id="bulk-badge" class="copy-badge" style="left: 50%; right: auto; transform: translateX(-50%); top: 10px;">コピーしました！</div>
        
        <h1>現在の接続情報</h1>
        
        <div class="ip-group">
            <label>IPv4アドレス</label>
            <div id="badge-v4" class="copy-badge">コピーしました！</div>
            <div id="ipv4" class="ip-address loading" onclick="copyAction('ipv4', 'badge-v4')">スキャン中...</div>
        </div>

        <div class="ip-group">
            <label>IPv6アドレス</label>
            <div id="badge-v6" class="copy-badge">コピーしました！</div>
            <div id="ipv6" class="ip-address loading" onclick="copyAction('ipv6', 'badge-v6')">スキャン中...</div>
        </div>

        <div class="button-group">
            <button onclick="copyBulk()" class="btn btn-bulk">
                <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                IPを一括コピー
            </button>

            <button id="shareButton" class="btn btn-share">
                <svg viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92z"/></svg>
                このツールを共有
            </button>
        </div>
    </div>

    <footer>
        Created by <a href="https://linktr.ee/chocomoruch" target="_blank" class="creator-link">ChocomoruCh</a>and<a href="https://gemini.google.com/app" target="_blank" class="creator-link">Gemini</a>
    </footer>

    <script>
        // JS部分は以前と同じ（IP取得、コピー、共有ロジック）
        function copyBulk() {
            const v4 = document.getElementById('ipv4').innerText;
            const v6 = document.getElementById('ipv6').innerText;
            const badge = document.getElementById('bulk-badge');
            let copyText = "";
            if (!v4.includes("中") && !v4.includes("ません")) copyText += `v4: ${v4}`;
            if (!v6.includes("中") && !v6.includes("ません")) {
                if (copyText !== "") copyText += "\n";
                copyText += `v6: ${v6}`;
            }
            if (copyText === "") {
                badge.innerText = "コピーできる情報がありません";
                badge.classList.add('error-badge');
            } else {
                navigator.clipboard.writeText(copyText);
                badge.innerText = "まとめてコピーしました！";
                badge.classList.remove('error-badge');
            }
            badge.classList.add('show');
            setTimeout(() => badge.classList.remove('show'), 2000);
        }

        function copyAction(elementId, badgeId) {
            const el = document.getElementById(elementId);
            const badge = document.getElementById(badgeId);
            const text = el.innerText;
            if (text.includes("中")) return;
            if (text.includes("ません")) {
                badge.innerText = "コピーに失敗しました";
                badge.classList.add('error-badge');
                badge.classList.add('show');
                setTimeout(() => {
                    badge.classList.remove('show');
                    setTimeout(() => { badge.classList.remove('error-badge'); badge.innerText = "コピーしました！"; }, 300);
                }, 1500);
            } else {
                navigator.clipboard.writeText(text).then(() => {
                    badge.classList.add('show');
                    setTimeout(() => badge.classList.remove('show'), 1500);
                });
            }
        }

        document.getElementById('shareButton').addEventListener('click', async () => {
            const shareData = { title: 'IPアドレス確認くん', text: 'IP確認ツール', url: window.location.href };
            if (navigator.share) {
                try { await navigator.share(shareData); } catch (err) {}
            } else {
                navigator.clipboard.writeText(shareData.url).then(() => {
                    const btn = document.getElementById('shareButton');
                    const old = btn.innerHTML;
                    btn.innerText = 'URLをコピーしました！';
                    setTimeout(() => btn.innerHTML = old, 2000);
                });
            }
        });

        const updateIP = (id, url) => {
            const el = document.getElementById(id);
            fetch(url).then(res => res.json()).then(data => {
                el.innerText = data.ip;
                el.classList.remove('loading');
            }).catch(() => {
                el.innerText = "検出されませんでした";
                el.classList.remove('loading');
                el.classList.add('error-text');
            });
        };

        setTimeout(() => updateIP('ipv4', 'https://api4.ipify.org?format=json'), 400);
        setTimeout(() => updateIP('ipv6', 'https://api6.ipify.org?format=json'), 700);
    </script>
</body>
</html>

